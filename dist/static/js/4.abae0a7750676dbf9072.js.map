{"version":3,"sources":["webpack:///./src/api/axios.js","webpack:///./src/components/Register.vue?6566","webpack:///./src/components/Register.vue?1dde","webpack:///src/components/Register.vue","webpack:///./src/components/Register.vue","webpack:///./src/components/Login.vue?ad0d","webpack:///./src/components/Login.vue?1c41","webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue"],"names":["axios","defaults","timeout","headers","post","axiosToken","create","interceptors","request","use","config","store","state","token","Authorization","err","babel_runtime_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default","a","reject","response","data","status","dispatch","router","push","path","query","redirect","currentRoute","fullPath","__webpack_exports__","userRegister","userLogin","getUser","get","delUser","components_Registervue_type_script_lang_js_","_this","this","regForm","username","password","checkPassword","rules","required","message","trigger","min","max","validator","rule","value","callback","test","Error","methods","resetForm","formName","$refs","resetFields","submitForm","_this2","validate","valid","then","res","success","$message","type","$store","redirectUrl","decodeURIComponent","$route","$router","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","ref","attrs","model","label-width","label","prop","$$v","$set","expression","_v","on","click","$event","components_Loginvue_type_script_lang_js_","components","Register","activeName","loginForm","form","info","span","offset","name"],"mappings":"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","file":"static/js/4.abae0a7750676dbf9072.js","sourcesContent":["import axios from 'axios'\nimport router from '../router'\nimport store from '../vuex'\n\n// 设置全局axios默认值\naxios.defaults.timeout = 6000 // 5000的超时验证\naxios.defaults.headers.post['Content-Type'] = 'application/json;charset=UTF-8'\n\nconst axiosToken = axios.create()\naxiosToken.defaults.headers.post['Content-Type'] = 'application/json;charset=UTF-8'\n\naxios.interceptors.request.use = axiosToken.interceptors.request.use\n\n// request 拦截\naxiosToken.interceptors.request.use(\n  config => {\n    if (store.state.token) {\n      config.headers.Authorization = `token ${store.state.token}`\n    }\n    return config\n  },\n  err => {\n    return Promise.reject(err)\n  }\n)\n\n// response 拦截\naxiosToken.interceptors.response.use(\n  response => {\n    return response.data\n  },\n  err => {\n    if (err.response) {\n      if (err.response.status === 401) {\n        store.dispatch('UserLogout') // 可能token过期，清除\n        router.push({\n          path: 'login',\n          query: {redirect: router.currentRoute.fullPath}\n        })\n      }\n    }\n    return Promise.reject(err.response)\n  }\n)\n\n// api接口\nexport default {\n  // 用户注册\n  userRegister (data) {\n    return axiosToken.post('/api/user/register', data)\n  },\n  // 用户登录\n  userLogin (data) {\n    return axiosToken.post('/api/user/login', data)\n  },\n  // 获取用户\n  getUser () {\n    return axiosToken.get('/api/user')\n  },\n  // 删除用户\n  delUser (data) {\n    return axiosToken.post('/api/delUser', data)\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{ref:\"regForm\",attrs:{\"model\":_vm.regForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.regForm.username),callback:function ($$v) {_vm.$set(_vm.regForm, \"username\", $$v)},expression:\"regForm.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.regForm.password),callback:function ($$v) {_vm.$set(_vm.regForm, \"password\", $$v)},expression:\"regForm.password\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"checkPassword\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.regForm.checkPassword),callback:function ($$v) {_vm.$set(_vm.regForm, \"checkPassword\", $$v)},expression:\"regForm.checkPassword\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('regForm')}}},[_vm._v(\"注册\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('regForm')}}},[_vm._v(\"重置\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","<template>\n    <div>\n        <el-form :model=\"regForm\" :rules=\"rules\" label-width=\"100px\" ref=\"regForm\">\n            <el-form-item label=\"用户名\" prop=\"username\">\n                <el-input v-model=\"regForm.username\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"密码\" prop=\"password\">\n                <el-input v-model=\"regForm.password\" type=\"password\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"确认密码\" prop=\"checkPassword\">\n                <el-input v-model=\"regForm.checkPassword\" type=\"password\"></el-input>\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" @click=\"submitForm('regForm')\">注册</el-button>\n                <el-button @click=\"resetForm('regForm')\" >重置</el-button>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport api from '@/api/axios.js'\n\nexport default {\n  data () {\n    // 自定义验证规则\n    let validatePass1 = (rule, value, callback) => {\n      // 6-16位, 数字, 字母, 字符至少包含两种, 同时不能包含中文和空格\n      let reg = /(?!^[0-9]+$)(?!^[A-z]+$)(?!^[^A-z0-9]+$)^[^\\s\\u4e00-\\u9fa5]{6,16}$/\n      if (!reg.test(value)) {\n        callback(new Error('密码长度需6-16位，且包含字母和字符'))\n      } else {\n        callback()\n      }\n    }\n    // 验证密码是否重复\n    let validatePass2 = (rule, value, callback) => {\n      if (value !== this.regForm.password) {\n        callback(new Error('两次密码输入不一致'))\n      } else {\n        callback()\n      }\n    }\n\n    return {\n      regForm: {\n        username: '',\n        password: '',\n        checkPassword: ''\n      },\n      rules: {\n        username: [\n          {required: true, message: '用户名不能少', trigger: 'blur'},\n          {min: 6, max: 16, message: '用户名在6到16位之间', trigger: 'blur'}\n        ],\n        password: [\n          {required: true, message: '请输入密码', trigger: 'blur'},\n          {validator: validatePass1, trigger: 'blur'}\n        ],\n        checkPassword: [\n          {required: true, message: '请再次输入密码', trigger: 'blur'},\n          {validator: validatePass2, trigger: 'blur'}\n        ]\n      }\n    }\n  },\n  methods: {\n    resetForm (formName) {\n      this.$refs[formName].resetFields()\n    },\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) { // 验证通过\n          api.userRegister(this.regForm)\n            .then((res) => {\n              if (res.success) {\n                this.$message({\n                  type: 'success',\n                  message: '注册成功'\n                })\n                let token = res.token\n                let username = res.username\n                this.$store.dispatch('UserLogin', token)\n                this.$store.dispatch('UserName', username)\n                let redirectUrl = decodeURIComponent(this.$route.query.redirect || '/')\n                // 跳转到指定的路由\n                this.$router.push({\n                  path: redirectUrl\n                })\n              } else {\n                this.$message({\n                  type: 'info',\n                  message: '用户名已经存在'\n                })\n              }\n            })\n        } else { // 验证不通过\n          return false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=2e67b472&scoped=true&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2e67b472\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',[_c('el-col',{attrs:{\"span\":10,\"offset\":7}},[_c('el-tabs',{model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"登录\",\"name\":\"login\"}},[_c('el-form',{ref:\"loginForm\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('loginForm')}}},[_vm._v(\"提交\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('loginForm')}}},[_vm._v(\"重置\")])],1)],1)],1),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"注册\",\"name\":\"register\"}},[_c('Register')],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","<template>\n  <div>\n    <el-row>\n      <el-col :span=\"10\" :offset=\"7\">\n        <!-- el-tabs放在这里其实不合理，可以提到App.vue里面。然后引入Login组件和Register组件 -->\n        <el-tabs v-model=\"activeName\">\n\n          <el-tab-pane label=\"登录\" name=\"login\">\n            <el-form :model=\"loginForm\" :rules=\"rules\" label-width=\"100px\" ref=\"loginForm\">\n              <el-form-item label=\"用户名\" prop=\"username\">\n                <el-input v-model=\"loginForm.username\"/>\n              </el-form-item>\n              <el-form-item label=\"密码\" prop=\"password\">\n                <el-input v-model=\"loginForm.password\" type=\"password\"/>\n              </el-form-item>\n              <el-form-item>\n                <el-button type=\"primary\" @click=\"submitForm('loginForm')\">提交</el-button>\n                <el-button @click=\"resetForm('loginForm')\">重置</el-button>\n              </el-form-item>\n            </el-form>\n          </el-tab-pane>\n\n          <el-tab-pane label=\"注册\" name=\"register\">\n            <Register/>\n          </el-tab-pane>\n\n        </el-tabs>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\n  import api from '@/api/axios.js'\n  // 引入验证组件\n  import Register from './Register.vue'\n\n  export default {\n    components: {\n      Register\n    },\n    data () {\n      return {\n        activeName: 'login', // 选项卡\n        loginForm: { // 表单v-model的值\n          username: '',\n          password: ''\n        },\n        rules: { // 验证规则\n          username: [\n            {required: true, message: '用户名不能少', trigger: 'blur'},\n            {min: 6, max: 16, message: '用户名在6到16位之间', trigger: 'blur'}\n          ],\n          password: [\n            {required: true, message: '请输入密码', trigger: 'blur'}\n          ]\n        }\n      }\n    },\n    methods: {\n      resetForm (formName) {\n        this.$refs[formName].resetFields()\n      },\n      submitForm (formName) {\n        this.$refs[formName].validate((valid) => {\n          if (valid) { // 验证通过\n            let form = this.loginForm\n            api.userLogin(form)\n              .then((res) => {\n                // 账号存在\n                if (res.success) {\n                  this.$message({\n                    type: 'success',\n                    message: '登录成功'\n                  })\n                  let token = res.token\n                  let username = res.username\n                  this.$store.dispatch('UserLogin', token)\n                  this.$store.dispatch('UserName', username)\n                  let redirectUrl = decodeURIComponent(this.$route.query.redirect || '/')\n                  // 跳转到指定的路由\n                  this.$router.push({\n                    path: redirectUrl\n                  })\n                } else if (res.success === false) {\n                  this.$message({\n                    type: 'info',\n                    message: res.info\n                  })\n                }\n              })\n          } else {\n            // 验证不通过\n            return false\n          }\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=881908c4&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"881908c4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}